<div class="document" id="installing-horde-groupware-5">
<h1 class="title">Installing Horde Groupware 5</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference external" href="mailto:horde&#64;lists.horde.org">horde&#64;lists.horde.org</a></td></tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#quick-install" id="id1">1&nbsp;&nbsp;&nbsp;Quick Install</a></li>
<li><a class="reference internal" href="#prerequisites" id="id2">2&nbsp;&nbsp;&nbsp;Prerequisites</a></li>
<li><a class="reference internal" href="#installing-horde-groupware" id="id3">3&nbsp;&nbsp;&nbsp;Installing Horde Groupware</a><ul class="auto-toc">
<li><a class="reference internal" href="#installing-with-pear" id="id4">3.1&nbsp;&nbsp;&nbsp;Installing with PEAR</a></li>
<li><a class="reference internal" href="#installing-into-separate-pear" id="id5">3.2&nbsp;&nbsp;&nbsp;Installing into separate PEAR</a></li>
<li><a class="reference internal" href="#finishing-installation" id="id6">3.3&nbsp;&nbsp;&nbsp;Finishing installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-horde-groupware" id="id7">4&nbsp;&nbsp;&nbsp;Configuring Horde Groupware</a></li>
<li><a class="reference internal" href="#temporary-files" id="id8">5&nbsp;&nbsp;&nbsp;Temporary Files</a></li>
<li><a class="reference internal" href="#translations" id="id9">6&nbsp;&nbsp;&nbsp;Translations</a></li>
<li><a class="reference internal" href="#obtaining-support" id="id10">7&nbsp;&nbsp;&nbsp;Obtaining Support</a></li>
</ul>
</div>
<p>This document contains instructions for installing Horde Groupware on your
system.</p>
<p>For information on the capabilities and features of Horde Groupware, see the
file <a class="reference external" href="README">README</a> in the top-level directory of the Horde Groupware distribution.</p>
<div class="section" id="quick-install">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Quick Install</a></h1>
<p>These are very terse instructions how to install Horde Groupware and its
prerequisites on a LAMP sytem. They are addressed to experienced administrators
who know exactly what they are doing.  For more detailed instructions, start
reading below at <a class="reference internal" href="#prerequisites">Prerequisites</a>.</p>
<ol class="arabic">
<li><p class="first">Compiling PHP for Apache 2:</p>
<pre class="literal-block">
cd php-x.x.x/
./configure --with-apxs2=/usr/sbin/apxs2 \
            --with-gettext --enable-mbstring=all --enable-mbregex \
            --with-gd --with-png-dir=/usr --with-jpeg-dir=/usr \
            [--with-mysql|--with-pgsql|--with-oci8]
            [--with-tidy]
            [--with-ftp]
make
make install
</pre>
</li>
<li><p class="first">Restart Apache.</p>
</li>
<li><p class="first">Register Horde PEAR channel:</p>
<pre class="literal-block">
pear channel-discover pear.horde.org
</pre>
</li>
<li><p class="first">Set Horde installation directory:</p>
<pre class="literal-block">
pear install horde/horde_role
pear run-scripts horde/horde_role
</pre>
</li>
<li><p class="first">Install Horde Groupware:</p>
<pre class="literal-block">
pear install -a -B horde/groupware
</pre>
</li>
<li><p class="first">Run installation script:</p>
<pre class="literal-block">
groupware-install
</pre>
</li>
<li><p class="first">Test Horde Groupware:</p>
<pre class="literal-block">
http://your-server/horde/test.php
</pre>
</li>
</ol>
</div>
<div class="section" id="prerequisites">
<h1><a class="toc-backref" href="#id2">2&nbsp;&nbsp;&nbsp;Prerequisites</a></h1>
<p>The following prerequisites are <strong>REQUIRED</strong> for Horde Groupware to function
properly.</p>
<ol class="arabic">
<li><p class="first">A webserver that supports PHP.</p>
<p>Horde Groupware is primarily developed under the Apache and Lighttpd
webservers, which we recommend.  These servers are available from:</p>
<blockquote>
<p><a class="reference external" href="http://httpd.apache.org/">http://httpd.apache.org/</a>
<a class="reference external" href="http://www.lighttpd.net/">http://www.lighttpd.net/</a></p>
</blockquote>
</li>
<li><p class="first">A web server with PATH_INFO support.</p>
<p>The dynamic interfaces of Horde Groupware requires a web server that
correctly sets the PATH_INFO environment variable for all PHP scripts. Every
modern web server supports this, but you might have to enable this feature
in the web server configuration.  e.g. Apache servers require:</p>
<pre class="literal-block">
AcceptPathInfo On
</pre>
<p>Lighttpd servers require:</p>
<pre class="literal-block">
&quot;broken-scriptfilename&quot; =&gt; &quot;enable&quot;
</pre>
</li>
<li><p class="first">PHP 5.3.0 or above.</p>
<p>PHP is the interpreted language in which Horde Groupware is written.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">If possible, you should install PHP with your operating system's
package manager. Alternatively you build PHP yourself.</p>
</div>
<p>To build PHP from sources, you can obtain it at</p>
<blockquote>
<p><a class="reference external" href="http://www.php.net/">http://www.php.net/</a></p>
</blockquote>
<p>Follow the instructions in the PHP package to build PHP for your system. If
you use Apache, be sure to build PHP as a library with one of the following
options:</p>
<pre class="literal-block">
--with-apache
--with-apxs
--with-apxs2
</pre>
<p>options to <tt class="docutils literal">./configure</tt>, and not as a standalone executable.</p>
<p>The following PHP options are <strong>REQUIRED</strong> by Horde Groupware (listed with
their own prerequisites and configure options). In many cases, the required
libraries and tools can be obtained as packages from your operating system
vendor.</p>
<ol class="loweralpha">
<li><p class="first">Gettext support. <tt class="docutils literal"><span class="pre">--with-gettext</span></tt></p>
<p>Gettext is the GNU Translation Project's localization library.  Horde
Groupware uses gettext to provide local translations of text displayed by
applications. Information on obtaining the gettext package is available
at</p>
<blockquote>
<p><a class="reference external" href="http://www.gnu.org/software/gettext/gettext.html">http://www.gnu.org/software/gettext/gettext.html</a></p>
</blockquote>
<p>See also note below on configuring <a class="reference internal" href="#translations">Translations</a>.</p>
</li>
<li><p class="first">XML and DOMXML support.</p>
<p>XML and DOM support are enabled in PHP 5 by default. You only have to
make sure that you do <strong>not</strong> use <tt class="docutils literal"><span class="pre">--disable-dom</span></tt>,
<tt class="docutils literal"><span class="pre">--disable-simplexml</span></tt>, or <tt class="docutils literal"><span class="pre">--disable-xml</span></tt>.</p>
<p>Make sure you are using a newer version of libxml.  Older version of
libxml (e.g. 2.6.26) have been reported to be partially broken when
handling certain charsets.</p>
</li>
</ol>
<p>The following PHP options are <strong>RECOMMENDED</strong> to enable advanced features
in Horde Groupware:</p>
<ol class="loweralpha">
<li><p class="first">File Upload Support</p>
<p>File upload support is <strong>required</strong> to allow various importing features
to work. To enable file upload support:</p>
<blockquote>
<blockquote>
<ol class="arabic">
<li><p class="first">In your php.ini file, the following line <strong>must</strong> be present:</p>
<pre class="literal-block">
file_uploads = On
</pre>
</li>
<li><p class="first">Your temporary upload directory <strong>must</strong> be writable to the user
the web server is running as. If you leave the configuration
option <tt class="docutils literal">upload_tmp_dir</tt> blank in <tt class="docutils literal">php.ini</tt>, PHP will use the
default directory compiled into it (normally <tt class="docutils literal">/tmp</tt> on
Unix-like systems).</p>
</li>
<li><p class="first">Set the maximum size of the uploaded files via the
<tt class="docutils literal">upload_max_filesize</tt> configuration option in <tt class="docutils literal">php.ini</tt>. For
example, to allow 5 MB attachments, place the following line in
your <tt class="docutils literal">php.ini</tt> file:</p>
<pre class="literal-block">
upload_max_filesize = 5M
</pre>
</li>
</ol>
</blockquote>
<p>If either <tt class="docutils literal">file_uploads</tt> is turned off, or your temporary upload
directory is <em>not</em> writable by the server, all file upload functionality
will be disabled by Horde Groupware and will not be available to the
user.</p>
<p>See the <a class="reference external" href="http://wiki.horde.org/FAQ/Admin/FileUploads">File Uploads</a> FAQ entry for further information.</p>
</blockquote>
</li>
<li><p class="first">A preferences container.</p>
<p>Horde Groupware can store user preferences in an SQL database, an LDAP
directory, an IMSP server, a Kolab server, or in PHP sessions. An SQL
database is used and configured by default.</p>
<p>For SQL database preferences storage, Horde Groupware is thoroughly
tested on MySQL(i) (<tt class="docutils literal"><span class="pre">--with-mysql(i)</span></tt>) and PostgreSQL
(<tt class="docutils literal"><span class="pre">--with-pgsql</span></tt>), and has been reported to work with SQLite (enabled by
default).</p>
<p>Preferences can also be stored via LDAP (<tt class="docutils literal"><span class="pre">--with-ldap</span></tt>), Kolab
(<tt class="docutils literal"><span class="pre">--with-ldap</span></tt>), and IMSP.</p>
<p>Alternatively, preferences can be stored in PHP sessions, which
requires no external programs or configure options, but which will not
maintain preferences between sessions.</p>
<p>While the LDAP, database, Kolab, or IMSP server need not be running on
the machine onto which you are installing Horde Groupware, the
appropriate client libraries to access the server must be available
locally.</p>
<p>If a preference container is not configured, no preference options will
be configurable via Horde Groupware's web interface - the default values
stored in each applications <tt class="docutils literal">config/prefs.php</tt> file will be used.</p>
</li>
<li><p class="first">UTF-8 support (mbstring and iconv extensions) <tt class="docutils literal"><span class="pre">--enable-mbstring</span></tt></p>
<p>If these extensions are enabled, Horde Groupware can better support
multibyte character sets like UTF-8.</p>
<p>For iconv support you should use the GNU libiconv library, which is more
stable and supports more charsets, compared to other iconv
implementations, like Solaris', for example.</p>
<p>Iconv support is enabled by default in PHP 5. You only have to make sure
that you do <strong>not</strong> use <tt class="docutils literal"><span class="pre">--without-iconv</span></tt></p>
</li>
<li><p class="first">GD support <tt class="docutils literal"><span class="pre">--with-gd</span></tt></p>
<p>Horde Groupware will use the GD extension to perform manipulations on
image data through the Horde_Image library.</p>
<p>If you want GD to be able to work with PNG images, you should use the
<tt class="docutils literal"><span class="pre">--with-png-dir</span></tt> option to make sure PHP can find the PNG libraries
it needs to compile.</p>
<p>If you want GD to be able to work with JPEG images, you should use the
<tt class="docutils literal"><span class="pre">--with-jpeg-dir</span></tt> option to make sure PHP can find the JPEG libraries
it needs to compile.</p>
<p>You can also use the <a class="reference external" href="http://pecl.php.net/package/imagick">imagick</a> extension or the <a class="reference external" href="http://www.imagemagick.org">ImageMagick</a> package to do
these manipulations instead. The <a class="reference external" href="http://pecl.php.net/package/imagick">imagick</a> extension is the recommended
method for image manipulation. See the <tt class="docutils literal">Image Manipulation</tt> tab of the
Horde configuration for more details.</p>
</li>
<li><p class="first">tidy <tt class="docutils literal"><span class="pre">--with-tidy</span></tt></p>
<p>The tidy PHP extension is required to sanitize HTML data.</p>
</li>
</ol>
</li>
</ol>
<blockquote id="openssl-support">
<ol class="loweralpha" start="6">
<li><p class="first">OpenSSL support <tt class="docutils literal"><span class="pre">--with-openssl</span></tt></p>
<p>The OpenSSL PHP extension is used by Horde Groupware to provide S/MIME
support.  Without the extension, all S/MIME options will be disabled.</p>
<p>Additionally, the OpenSSL PHP extension is REQUIRED if using TLS or SSL
to connect to a server.</p>
<p>See <a class="reference external" href="http://www.php.net/openssl">http://www.php.net/openssl</a> for information on compiling OpenSSL
into PHP.</p>
</li>
<li><p class="first">fileinfo</p>
<p>Allows Horde modules to guess the MIME type of files by analyzing
their contents.</p>
<p>This module is automatically enabled by default.</p>
</li>
<li><p class="first">intl <tt class="docutils literal"><span class="pre">--enable-intl</span></tt></p>
<p>The intl module is required to handle display of Internationalized
Domain Names (see <a class="reference external" href="http://www.faqs.org/rfcs/rfc3490.html">RFC 3490</a>), e.g in e-mail addresses.</p>
</li>
<li><p class="first"><span class="target" id="curl">curl</span> <tt class="docutils literal"><span class="pre">--with-curl</span></tt></p>
<p>The <a class="reference external" href="http://php.net/curl">curl extension</a>, if installed, will be used instead of PHP's
fopen() when retrieving data from external HTTP servers (remote
calendars, web APIs, etc.). This is much more reliable and flexible, so
it is recommended to either enable it or install the <a class="reference internal" href="#http">http</a> extension.</p>
<p>This extension can be enabled by adding the <tt class="docutils literal"><span class="pre">--with-curl</span></tt> option when
compiling PHP.</p>
</li>
<li><p class="first">FTP support <tt class="docutils literal"><span class="pre">--with-ftp</span></tt></p>
<p>If using the FTP VFS driver for the file manager, the FTP PHP module is
<strong>required</strong>.</p>
</li>
</ol>
</blockquote>
<ol class="arabic" start="4">
<li><p class="first">PEAR Modules</p>
<p>PEAR is short for &quot;PHP Extension and Application Repository&quot;.  The goal of
PEAR is to provide a means of distributing reusable code.</p>
<p>For more information, see <a class="reference external" href="http://pear.php.net/">http://pear.php.net/</a></p>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">Make sure you are running a supported (i.e. new enough)
version of PEAR: use the test script described below under
&quot;<a href="#id11"><span class="problematic" id="id12">`Testing Horde Groupware`_</span></a>&quot;.  Do <strong>not</strong> use the PEAR
version from ftp.horde.org.</p>
</div>
<p>Check that the path where the PEAR packages are installed are part of the
<tt class="docutils literal">include_path</tt> parameter that PHP uses to find PEAR packages.</p>
<p>Run the command:</p>
<pre class="literal-block">
pear config-show
</pre>
<p>You will see something like:</p>
<pre class="literal-block">
PEAR directory   php_dir   /usr/share/php
</pre>
<p>Now open the php.ini file of your system, for example <tt class="docutils literal">/etc/php.ini</tt>,
find the <tt class="docutils literal">include_path</tt> and make sure that <tt class="docutils literal">/usr/share/php</tt> is part of
the list.  If you had to change that value, restart the web server after
saving <tt class="docutils literal">php.ini</tt>.</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">If you are going to install Horde the recommended way,
i.e. using the PEAR installer, you can skip the remainder of
this section. Installing Horde through PEAR will
automatically download and install all required PEAR
packages.</p>
</div>
<p>These PEAR packages are <strong>REQUIRED</strong> to be installed:</p>
<ol class="loweralpha">
<li><p class="first">Date</p>
<p>Horde Groupware Webmail Edition uses the Date package for various date
calculations.
To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pear install Date
</pre>
</li>
</ol>
<p>These PEAR packages are <strong>RECOMMENDED</strong> to be installed:</p>
<ol class="loweralpha">
<li><p class="first">Net_DNS2</p>
<p>If installed, it will be used instead of the built-in PHP function
gethostbyaddr() for host name lookups. This has the advantage that
Net_DNS2 has configurable timeouts and retries.
To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pear install Net_DNS2
</pre>
</li>
<li><p class="first">Services_Weather (&gt;= 1.3.1)</p>
<p><strong>REQUIRED</strong> only if you wish to use the weather.com block on the portal
page.
To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pear install Services_Weather
</pre>
<p>Additional steps are required if you want use the METAR weather block on
the portal page. See the file <tt class="docutils literal">data/Services_Weather/buildMetarDB.php</tt>
in your PEAR directory for details.</p>
</li>
<li><p class="first">File_Fstab</p>
</li>
</ol>
<blockquote>
<p>Required only if you use the localhost driver for the Accounts block.
To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pear install File_Fstab
</pre>
</blockquote>
<p>These PEAR packages are <strong>OPTIONAL</strong> to be installed:</p>
<ol class="loweralpha">
<li><p class="first">Date_Holidays</p>
<p>Horde Groupware Webmail Edition can use the Date_Holidays package to show
several sets of national and religious holidays and memorial days. Since
Date_Holidays consists of a number of sub-packages, one for each country,
you should install all packages at once:</p>
<pre class="literal-block">
pear install Date_Holidays-alpha#all
</pre>
</li>
</ol>
<p>This method of installing PEAR packages requires that you have a PHP version
that has been compiled as a static binary.  All versions of PHP build both
both a SAPI module (Apache, CGI, etc.) and a command-line (CLI) binary.
Check if you have a php binary in <tt class="docutils literal">/usr/local/bin</tt> (<tt class="docutils literal">/usr/bin</tt> if you
installed from an operating system package) before recompiling.</p>
<p>For more detailed directions on installing PEAR packages, see the PEAR
documentation at <a class="reference external" href="http://pear.php.net/manual/">http://pear.php.net/manual/</a></p>
</li>
<li><p class="first">Additional PECL Modules</p>
<p>PECL is short for &quot;PHP Extension Community Library&quot;.  The goal of PECL is
to provide a means of easily distributing PHP extensions.</p>
<p>For more information, see <a class="reference external" href="http://pecl.php.net/">http://pecl.php.net/</a></p>
<p>When you install a PECL extension, you have to add it to your <tt class="docutils literal">php.ini</tt>
so it gets loaded.  Add the following line to your <tt class="docutils literal">php.ini</tt> file to load
the extension (the extension should be installed in the directory specified
by the <tt class="docutils literal">extension_dir</tt> option in <tt class="docutils literal">php.ini</tt>):</p>
<pre class="literal-block">
extension=fileinfo.so
</pre>
<p>Or on Windows:</p>
<pre class="literal-block">
extension=fileinfo.dll
</pre>
<p>After that, restart your webserver.</p>
<p>These PECL modules are <strong>RECOMMENDED</strong> to be installed if you need
advanced functionality:</p>
<ol class="loweralpha">
<li><p class="first">imagick</p>
<p>The imagick module can be used by Horde's image library to provide all
kind of image manipulations.</p>
<p>To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pecl install imagick
</pre>
</li>
<li><p class="first">horde_lz4</p>
<p>If the horde_lz4 extension is available, Horde can perform real-time
compression on data, resulting in reduced storage load on the server for
things like cache storage and session data. It is highly recommended.</p>
<p>To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pecl install horde/horde_lz4
</pre>
</li>
<li><p class="first">memcache</p>
<p>If using the memcached SessionHandler, the memcache PECL extension must
be installed.</p>
<p>To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pecl install memcache
</pre>
</li>
<li><p class="first"><span class="target" id="http">http</span></p>
<p>The <a class="reference external" href="http://php.net/http">http extension</a>, if installed, will be used instead of PHP's
fopen() when retrieving data from external HTTP servers (remote
calendars, web APIs, etc.). This is much more reliable and flexible, so
it recommended to either install this or enable the <a class="reference internal" href="#curl">curl</a> extension.</p>
<p>To install, enter the following at the command prompt:</p>
<pre class="literal-block">
pecl install http
</pre>
</li>
</ol>
</li>
</ol>
<p>The following non-PHP prerequisites are <strong>RECOMMENDED</strong>:</p>
<ol class="arabic">
<li><p class="first">aspell - Spelling Checker</p>
<p>Aspell, a comand-line program, is used as Horde Groupware's spell-checking
engine.  You must install and configure aspell to use Horde Groupware's
spell-check feature.</p>
<p>Version 0.60 or higher is REQUIRED.</p>
<p>You can obtain aspell from:</p>
<blockquote>
<p><a class="reference external" href="http://aspell.sourceforge.net/">http://aspell.sourceforge.net/</a></p>
</blockquote>
</li>
<li><p class="first">Sendmail or SMTP server.</p>
<p>Horde Groupware sends mail via either a local sendmail or a remote SMTP
server.  It is <strong>RECOMMENDED</strong> that SMTP be used.</p>
</li>
<li><p class="first">FTP server.</p>
<p>If using a FTP backend for the file manager, you <strong>must</strong> have at least one
FTP server.</p>
</li>
<li><p class="first">ElasticSearch server.</p>
<p>An <a class="reference external" href="http://www.elasticsearch.org/">ElasticSearch</a> server or cluster running on localhost can be used to
provide indexing of bookmarks data and quick searching of the indexed
content.</p>
</li>
</ol>
</div>
<div class="section" id="installing-horde-groupware">
<h1><a class="toc-backref" href="#id3">3&nbsp;&nbsp;&nbsp;Installing Horde Groupware</a></h1>
<p>The <strong>RECOMMENDED</strong> way to install Horde Groupware is using the PEAR installer.</p>
<div class="section" id="installing-with-pear">
<h2><a class="toc-backref" href="#id4">3.1&nbsp;&nbsp;&nbsp;Installing with PEAR</a></h2>
<p>First you need to register the Horde PEAR channel server to your local PEAR
system. This has to be done only <strong>once</strong> ever on a single PEAR system:</p>
<pre class="literal-block">
pear channel-discover pear.horde.org
</pre>
<p>Next install a so-called &quot;role&quot; for Horde. This role defines where Horde
Groupware is supposed to be installed. This should be a directory in your web
server's web root, e.g. <tt class="docutils literal">/var/www/groupware</tt>. Again this has to be done only
<strong>once</strong> ever on a single PEAR system:</p>
<pre class="literal-block">
pear install horde/horde_role
pear run-scripts horde/horde_role
</pre>
<p>When installing Horde Groupware through PEAR now, the installer will
automatically install any dependencies of Horde Groupware too. If you want to
install Horde Groupware with all optional dependencies, but without the binary
PECL packages that have to be compiled, specify both the <tt class="docutils literal"><span class="pre">-a</span></tt> and the <tt class="docutils literal"><span class="pre">-B</span></tt>
flag:</p>
<pre class="literal-block">
pear install -a -B horde/groupware
</pre>
<p>By default, only the required dependencies will be installed:</p>
<pre class="literal-block">
pear install horde/groupware
</pre>
<p>If you want to install Horde Groupware even with all binary dependencies, you
need to remove the <tt class="docutils literal"><span class="pre">-B</span></tt> flag. Please note that this might also try to install
PHP extensions through PECL that might need further configuration or activation
in your PHP configuration:</p>
<pre class="literal-block">
pear install -a horde/groupware
</pre>
</div>
<div class="section" id="installing-into-separate-pear">
<h2><a class="toc-backref" href="#id5">3.2&nbsp;&nbsp;&nbsp;Installing into separate PEAR</a></h2>
<div class="warning">
<p class="first admonition-title">Warning</p>
<p class="last">Unless you really know <strong>why</strong> you want to do this, you probably
do <strong>not</strong> want to do this. Use the general PEAR installation
instructions from above instead.</p>
</div>
<p>If you want to create a separate PEAR installation for installing Horde
Groupware, independent from the system-wide PEAR installation, this can be done
with the following commands (in this example, <tt class="docutils literal">/var/www/groupware</tt> is used as
the location of the web-accessible Horde directory):</p>
<pre class="literal-block">
mkdir /var/www/groupware
pear config-create /var/www/groupware /var/www/groupware/pear.conf
pear -c /var/www/groupware/pear.conf install pear
</pre>
<p>Then follow the regular installation steps, but use the <tt class="docutils literal">pear</tt> command from
the PEAR installation you just created, e.g.:</p>
<pre class="literal-block">
/var/www/groupware/pear/pear -c /var/www/groupware/pear.conf \
    channel-discover pear.horde.org
</pre>
<p>Finally configure your web server in some way to point PHP's <tt class="docutils literal">include_path</tt>
setting to the PEAR installation and the <tt class="docutils literal">PHP_PEAR_SYSCONF_DIR</tt> environment
variable to the directory used during the config-create command:</p>
<pre class="literal-block">
php_value include_path /var/www/groupware/pear/php
SetEnv PHP_PEAR_SYSCONF_DIR /var/www/groupware
</pre>
<p>It is recommended to not use the .htaccess file in <tt class="docutils literal">/var/www/groupware/</tt> to
set these values because it will be overwritten with every further update.</p>
</div>
<div class="section" id="finishing-installation">
<h2><a class="toc-backref" href="#id6">3.3&nbsp;&nbsp;&nbsp;Finishing installation</a></h2>
<p>To finish installation, run the installation script on the command line and
answer all questions:</p>
<pre class="literal-block">
groupware-install
</pre>
<p>If you installed Horde Groupware into the global PEAR system, this script
should be in your command path. If the script cannot be found in your path, you
need to specify the full path to the script, e.g.:</p>
<pre class="literal-block">
/var/www/groupware/pear/groupware-install
</pre>
<p>You can use the <tt class="docutils literal">pear</tt> command to find the place where the script has been
installed:</p>
<pre class="literal-block">
pear config-get bin_dir
</pre>
<p>If you installed into a local PEAR installation, you need to tell PHP and PEAR
where to find the installation and the script, e.g.:</p>
<pre class="literal-block">
PHP_PEAR_SYSCONF_DIR=/var/www/groupware php \
    -d include_path=/var/www/groupware/pear/php \
    /var/www/groupware/pear/groupware-install
</pre>
</div>
</div>
<div class="section" id="configuring-horde-groupware">
<h1><a class="toc-backref" href="#id7">4&nbsp;&nbsp;&nbsp;Configuring Horde Groupware</a></h1>
<ol class="arabic">
<li><p class="first">Configuring the web server</p>
<p>Horde Groupware requires the following webserver settings. Examples shown
are for Apache; other webservers' configurations will differ.</p>
<ol class="loweralpha">
<li><p class="first">PHP interpretation for files matching <tt class="docutils literal">*.php</tt>:</p>
<pre class="literal-block">
AddType application/x-httpd-php .php
</pre>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">The above instructions may not work if you have specified PHP
as an output filter with <tt class="docutils literal">SetOutputFilter</tt> directive in
Apache 2.x versions.  In particular, Red Hat 8.0 and above
Apache 2.x RPMS have the output filter set, and <strong>MUST NOT</strong>
have the above <tt class="docutils literal">AddType</tt> directive added.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal">index.php</tt> as an index file (brought up when a user requests a URL for
a directory):</p>
<pre class="literal-block">
DirectoryIndex index.php
</pre>
</li>
<li><p class="first">If you plan to provide ActiveSync support to your users, you have to
create an alias of the <tt class="docutils literal"><span class="pre">/Microsoft-Servers-ActiveSync</span></tt> URL to
<tt class="docutils literal">/groupware/rpc.php</tt>. See <a class="reference external" href="http://wiki.horde.org/ActiveSync">http://wiki.horde.org/ActiveSync</a> for details.</p>
</li>
</ol>
</li>
<li><p class="first">Configuring Horde Groupware</p>
<p>Documentation on the format and purpose of the configuration files in the
<tt class="docutils literal">config/</tt> directory can be found in each file. The defaults will be
correct for most sites. If you wish to customize Horde Groupware's
appearance and behavior, create &quot;local&quot; files for the configuration file you
want to change. For example if you want to change the default value and lock
a preference, create a <tt class="docutils literal">config/prefs.local.php</tt> file with the following
content:</p>
<pre class="literal-block">
&lt;?php
$_prefs['prefname']['value'] = 'somedefault';
$_prefs['prefname']['locked'] = true;
</pre>
<p>This works with any configuration file.</p>
<div class="warning">
<p class="first admonition-title">Warning</p>
<p>All configuration files in Horde Groupware are PHP scripts that
are executed by the web server. If you make an error in one of
these files, Horde might stop working. Thus it is always a good
idea to test the configuration files after you edited them. If
you want to test mime_drivers.local.php for example run:</p>
<pre class="last literal-block">
php -l mime_drivers.local.php
</pre>
</div>
<p>The default configuration stores files uploaded through the file manager in
the SQL database. This is the most compatible configuration but doesn't
scale well, may hit some database server limits, and may only work for very
small installations. You should configure a different backend as soon as
possible. See <tt class="docutils literal">gollem/config/backends.php</tt> and
<tt class="docutils literal"><span class="pre">gollem/config/backends.d/10-groupware.php</span></tt> for details.</p>
</li>
<li><p class="first">Setting up alarm emails</p>
<p>If you want your users to be able to receive emails from the Horde_Alarm
system, you must set up a cron entry for <tt class="docutils literal"><span class="pre">horde-alarms</span></tt>, you
must have at least one administrator specified in the Horde configuration,
and you must have the PHP CLI installed (a CGI binary is not supported -
<tt class="docutils literal">php <span class="pre">-v</span></tt> will report what kind of PHP binary you have).</p>
<p>Running the job every 5 minutes is recommended:</p>
<pre class="literal-block">
# Horde Alarms
*/5 * * * * /usr/bin/horde-alarms
</pre>
<p>If not installing Horde Groupware through PEAR or if PEAR's <tt class="docutils literal">bin_dir</tt>
configuration doesn't point to <tt class="docutils literal">/usr/bin/</tt>, replace
<tt class="docutils literal"><span class="pre">/usr/bin/horde-alarms</span></tt> with the path to the <tt class="docutils literal"><span class="pre">horde-alarms</span></tt> script in
your Horde installation.</p>
</li>
<li><p class="first">Testing Horde Groupware</p>
<p>Once you have configured your webserver, PHP, and Horde Groupware, bring up
the included test page in your web browser to ensure that all necessary
prerequisites have been met. If you installed Horde Groupware as described
above, the URL to the test page would be:</p>
<pre class="literal-block">
http://your-server/groupware/test.php
</pre>
<p>Check that your PHP version is acceptably recent, that all required module
capabilities are present, and that <tt class="docutils literal">magic_quotes_runtime</tt> is set to
<tt class="docutils literal">Off</tt>. Then note the <tt class="docutils literal">Session counter: 1</tt> line under <tt class="docutils literal">PHP Sessions</tt>,
and reload the page. The session counter should increment.</p>
<p>If you get a warning like <tt class="docutils literal">Failed opening '/path/to/test.php' for
inclusion</tt>, make sure that the web server has the permission to read the
<tt class="docutils literal">test.php</tt> file.</p>
</li>
<li><p class="first">Securing Horde Groupware</p>
<ol class="loweralpha">
<li><p class="first">Global Passwords</p>
<p>Some of Horde Groupware's configuration files contain passwords which
local users could use to access your database.  It is recommended to
ensure that at least the Horde Groupware configuration files (in
<tt class="docutils literal">config/</tt>) are not readable to system users.  There are <tt class="docutils literal">.htaccess</tt>
files restricting access to directories that do not need to be accessed
directly; before relying on those, ensure that your webserver supports
<tt class="docutils literal">.htaccess</tt> and is configured to use them, and that the files in those
directories are in fact inaccessible via the browser.</p>
<p>An additional approach is to make Horde Groupware's configuration files
owned by the user <tt class="docutils literal">root</tt> and by a group which only the webserver user
belongs to, and then making them readable only to owner and group.  For
example, if your webserver runs as <tt class="docutils literal">www.www</tt>, do as follows:</p>
<pre class="literal-block">
chown -R root.www config/*
find config/ -type f -exec chmod 0440 '{}' \;
</pre>
</li>
<li><p class="first">User Passwords</p>
<p>Unless steps are taken to avoid it, there are two channels by which Horde
Groupware can cause users to pass their IMAP/POP3 passwords across the
network unencrypted.</p>
<p>The first channel is between the browser and the Web server.  We strongly
recommend using an SSL-capable Web server to give users the option of
encrypting communications between their browser and the Web server on
which Horde Groupware is running. Some sites may wish to disable non-SSL
access entirely.</p>
<p>The second channel is between the Web server and their authentication
backend.  The simplest way to avoid this is to have the authentication
source running on the same system as the Web server, and configuring
Horde Groupware to connect to the backend on <tt class="docutils literal">localhost</tt> instead of on
the Internet hostname. In cases where that is not possible, it is highly
recommended that the backend be located on a private, secure network.
Alternatively, the backend may be accessed via TLS to ensure that users'
passwords remain safe after they have entrusted them to Horde Groupware
(this is the default configuration).</p>
<p>Other security steps you can take to increase security include:</p>
<ul class="simple">
<li>Use session cookies instead of URL based sessions.</li>
<li>Set your php <tt class="docutils literal">session.entropy_length</tt> to a larger value (e.g. 16) and
<tt class="docutils literal">session.entropy_file</tt> to a random source (e.g. <tt class="docutils literal">/dev/urandom</tt>)</li>
<li>If your database, mail server, and web server are on the same host
machine, then:<ul>
<li>Use unix socket database access and disable TCP database access.</li>
<li>Use <tt class="docutils literal">localhost</tt> for all TCP/IP connections to avoid the network, or
run all services on a local, private network.</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol class="loweralpha" start="2">
<li><p class="first">Sessions</p>
<p>Session data -- including hashed versions of your users' passwords, in
some applications -- may not be stored as securely as necessary.</p>
<p>If you are using file-based PHP sessions (which are the default), be
sure that session files are not being written into <tt class="docutils literal">/tmp</tt> with
permissions that allow other users to read them. Ideally, change the
<tt class="docutils literal">session.save_path</tt> setting in <tt class="docutils literal">php.ini</tt> to a directory only
readable and writeable by your webserver.</p>
<p>Additionally, you can change the session handler of PHP to use any
storage backend requested (e.g. SQL database) via the <tt class="docutils literal">Custom Session
Handler</tt> tab in the Horde setup.</p>
</li>
</ol>
<p>For more information about securing your webserver, PHP and Horde Groupware,
see the <a class="reference external" href="../../horde/docs/SECURITY">docs/SECURITY</a> file.</p>
</li>
</ol>
</div>
<div class="section" id="temporary-files">
<h1><a class="toc-backref" href="#id8">5&nbsp;&nbsp;&nbsp;Temporary Files</a></h1>
<p>Various Horde Groupware applications will generate temporary files in PHP's
temporary directory (see the <tt class="docutils literal">General</tt> tab in the Horde setup).  For various
reasons, some of these files may not be removed when the user's session
ends. To reclaim this disk space, it may be necessary to periodically delete
these old temporary files.</p>
<p>An example cron-based solution can be found at
<tt class="docutils literal"><span class="pre">horde/scripts/temp-cleanup.cron</span></tt> in PEAR's <tt class="docutils literal">data_dir</tt> directory.  Another
possible solution is to use utilities like <tt class="docutils literal">tmpwatch</tt>, <tt class="docutils literal">tmpreaper</tt> or
anything similar to remove old files.</p>
<p>Stale sessions are automatically pruned by PHP according to the
<a class="reference external" href="http://www.php.net/manual/en/session.configuration.php#ini.session.gc-probability">session.gc_probability</a>, <a class="reference external" href="http://www.php.net/manual/en/session.configuration.php#ini.session.gc-divisor">session.gc_divisor</a>, and
<a class="reference external" href="http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime">session.gc_maxlifetime</a> settings located in <tt class="docutils literal">php.ini</tt>. However, the
default settings are very aggressive: the garbage collection routine runs on
average 1% of the time a page is loaded. For most installations, a lower
garbage collection rate is recommended (setting session.gc_divisor to 10,000
or higher is much more reasonable).</p>
</div>
<div class="section" id="translations">
<h1><a class="toc-backref" href="#id9">6&nbsp;&nbsp;&nbsp;Translations</a></h1>
<p>Note for international users: Horde Groupware uses GNU gettext to provide local
translations of text displayed by applications; the translations are found in
the po/ directory.  If a translation is not yet available for your locale (and
you wish to create one), or if you're having trouble using a provided
translation, please see the <a class="reference external" href="../../horde/docs/TRANSLATIONS">docs/TRANSLATIONS</a> file for instructions.</p>
</div>
<div class="section" id="obtaining-support">
<h1><a class="toc-backref" href="#id10">7&nbsp;&nbsp;&nbsp;Obtaining Support</a></h1>
<p>If you encounter problems with Horde Groupware, help is available!</p>
<p>The Horde Frequently Asked Questions List (FAQ), available on the Web at</p>
<blockquote>
<a class="reference external" href="http://wiki.horde.org/FAQ">http://wiki.horde.org/FAQ</a></blockquote>
<p>The Horde Project runs a number of mailing lists, for individual applications
and for issues relating to the project as a whole. Information, archives, and
subscription information can be found at</p>
<blockquote>
<a class="reference external" href="http://www.horde.org/community/mail">http://www.horde.org/community/mail</a></blockquote>
<p>There is no separate mailing list for Horde Groupware, please contact the
mailing list of the component you have problems with, or the Horde mailing list
for general problems and questions.</p>
<p>Lastly, Horde developers, contributors and users may also be found on IRC,
on the channel #horde on the Freenode Network (irc.freenode.net).</p>
<p>Please keep in mind that Horde Groupware is free software written by
volunteers.  For information on reasonable support expectations, please read</p>
<blockquote>
<a class="reference external" href="http://www.horde.org/community/support">http://www.horde.org/community/support</a></blockquote>
<p>Thanks for using Horde Groupware!</p>
<p>The Horde Team</p>
</div>
<div class="system-messages section">
<h1>Docutils System Messages</h1>
<div class="system-message" id="id11">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/usr/local/horde/checkout/horde.git/bundles/groupware/docs/INSTALL</tt>, line 278); <em><a href="#id12">backlink</a></em></p>
Unknown target name: &quot;testing horde groupware&quot;.</div>
</div>
</div>
